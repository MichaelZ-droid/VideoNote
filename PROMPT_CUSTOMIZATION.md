# 提示词自定义指南

## 📍 提示词位置

所有提示词都在 Edge Function 中定义：

**文件位置**：`supabase/functions/process-video-summary/index.ts`

**关键部分**：
- **第 16-30 行**：`SYSTEM_PROMPT` - 系统角色提示词
- **第 32-75 行**：`USER_PROMPT_TEMPLATE` - 用户任务提示词

## 🎯 当前优化重点

### 改进前的问题
- ❌ 摘要过于笼统（"介绍了..."、"讲解了..."）
- ❌ 缺少具体细节和关键信息
- ❌ 标题不够明确

### 优化后的效果
- ✅ 强调具体性和细节
- ✅ 提取关键数据、例子、术语
- ✅ 明确的标题和内容要求
- ✅ 提供正反面示例指导 AI

## 📝 如何修改提示词

### 1. 修改系统提示词

如果您想改变 AI 的角色定位，修改 `SYSTEM_PROMPT`：

```typescript
const SYSTEM_PROMPT = `你是一个专业的视频内容分析专家...

你的任务是：
1. [修改任务描述]
2. [添加新要求]

要求：
- [自定义要求]
`;
```

**建议的修改方向**：
- **针对特定领域**：如果视频主要是技术教程，可以强调"代码示例"、"技术细节"
- **针对特定风格**：如果需要更正式或更轻松的语气
- **针对特定受众**：如果是给初学者或专业人士

### 2. 修改用户提示词

如果您想改变输出格式或分析维度，修改 `USER_PROMPT_TEMPLATE`：

```typescript
const USER_PROMPT_TEMPLATE = `请基于以下带时间戳的视频文字稿，生成详细的结构化摘要。

## 分析要求：
1. **段落数量**：生成 5-10 个主要段落（根据内容长度调整）
   [可以修改为固定数量，如：必须生成 8 个段落]
   
2. **标题要求**：每个段落的标题要具体、明确
   [可以添加更多标题格式要求]
   
3. **内容要求**：
   - 描述要详细具体
   - [添加您的自定义要求]
`;
```

### 3. 修改示例

在 `USER_PROMPT_TEMPLATE` 中的示例部分非常重要，AI 会参考这些示例：

```typescript
## 示例（好的摘要）：
{
  "summary": [
    {
      "timestamp": "00:00",
      "title": "Python 列表推导式的三种高级用法",  // [修改为您领域的示例]
      "content": "讲解了..."  // [修改为期望的内容风格]
    }
  ]
}

## 反面示例（避免这样笼统的摘要）：
❌ "介绍了基本概念"  // [添加更多反面示例]
✅ "讲解了..."
```

## 🔧 实用的提示词技巧

### 技巧 1: 使用具体的指令

❌ **模糊**：生成摘要
✅ **具体**：生成 5-8 个段落，每个段落至少包含 2 个具体信息点

### 技巧 2: 提供清晰的格式

使用 JSON schema 明确输出格式：
```json
{
  "summary": [
    {
      "timestamp": "MM:SS",
      "title": "不超过 20 字的标题",
      "content": "50-100 字的详细描述"
    }
  ]
}
```

### 技巧 3: 使用约束条件

- "避免使用'介绍了'、'讲解了'等笼统词汇"
- "必须包含具体的数字、例子或术语"
- "每个段落至少 2-3 句话"

### 技巧 4: 提供上下文

告诉 AI 视频的用途：
- "这是技术教程，需要提取代码示例和技术要点"
- "这是会议记录，需要总结决策和行动项"
- "这是课程视频，需要梳理知识框架"

## 🎨 针对不同场景的提示词模板

### 场景 1: 技术教程

```typescript
const SYSTEM_PROMPT = `你是一个技术内容专家，擅长提取代码示例、技术原理和最佳实践。

重点关注：
- 具体的代码片段和 API 使用
- 技术原理和工作机制
- 性能优化和注意事项
- 实战技巧和踩坑经验
`;
```

### 场景 2: 会议记录

```typescript
const SYSTEM_PROMPT = `你是一个会议记录专家，擅长提取决策、行动项和关键讨论点。

重点关注：
- 讨论的主要议题
- 达成的决策和共识
- 分配的任务和责任人
- 需要跟进的事项
`;
```

### 场景 3: 学习笔记

```typescript
const SYSTEM_PROMPT = `你是一个学习助手，擅长梳理知识框架和核心概念。

重点关注：
- 核心概念的定义
- 知识点之间的关联
- 重要的例子和类比
- 需要记忆的关键点
`;
```

## 🚀 部署更改

修改提示词后，保存文件即可自动重新部署 Edge Function。

**查看日志**：
在 Supabase Dashboard 中查看函数日志，确认新提示词是否生效。

## 📊 效果评估

测试不同的提示词效果：

1. **上传相同视频**，对比不同提示词生成的摘要
2. **关注关键指标**：
   - 摘要的具体程度
   - 是否包含关键信息
   - 标题是否准确
   - 长度是否合适

3. **迭代优化**：
   - 如果摘要太笼统 → 加强"具体性"要求
   - 如果摘要太长 → 限制字数或段落数
   - 如果遗漏关键点 → 在提示词中明确要求关注这些点

## 💡 高级技巧

### 使用 Few-Shot Learning

在提示词中提供 3-5 个高质量示例，AI 会学习这种风格：

```typescript
## 示例 1：技术讲解
{
  "timestamp": "00:00",
  "title": "React Hooks 的三个核心规则",
  "content": "..."
}

## 示例 2：实战案例
{
  "timestamp": "05:30",
  "title": "用 useState 实现表单状态管理（完整代码 30 行）",
  "content": "..."
}

## 示例 3：性能优化
{
  "timestamp": "10:15",
  "title": "useMemo 避免不必要的重渲染（性能提升 40%）",
  "content": "..."
}
```

### 动态调整温度参数

在调用 AI API 时（当您集成真实 API 后）：

```typescript
temperature: 0.7  // 默认：平衡创造性和准确性
temperature: 0.3  // 更准确、更一致（适合技术内容）
temperature: 0.9  // 更有创意（适合营销内容）
```

## 🔗 相关资源

- **Edge Function 文件**：`supabase/functions/process-video-summary/index.ts`
- **阿里云 Qwen 文档**：https://help.aliyun.com/zh/model-studio/
- **提示词工程指南**：https://platform.openai.com/docs/guides/prompt-engineering

---

现在您可以根据自己的需求自由调整提示词，获得更好的摘要效果！🎉
